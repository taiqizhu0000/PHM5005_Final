# 阶段3: 特征重要性分析报告

## 方法概述

### 1. 跨折稳定性分析
- 统计15次嵌套CV训练中每个特征被选中（系数≠0）的频率
- 计算非零系数的中位数、均值和四分位数
- 综合重要性得分 = 选择频率 × |系数中位数|

### 2. Permutation Importance
- 在独立测试集上进行10次重复
- 衡量特征对模型预测的真实贡献
- 验证系数重要性的可靠性

### 3. 通路水平分析
- 汇总7个癌症相关通路的特征贡献
- 识别最重要的生物学通路

## 主要发现

### 特征选择统计

- **总特征数**: 898
  - 临床特征: 19
  - 基因特征: 879

- **被选中特征**:
  - 至少选中一次: 177 (19.7%)
  - 高频特征 (>50%): 9
  - 稳定特征 (>80%): 1

### Top 20 最重要特征

#### 按综合得分排序

| 排名 | 特征名 | 类型 | 选择频率 | 系数中位数 | 重要性得分 |
|------|--------|------|----------|-----------|----------|
| 1 | figo_stage_encoded | Clinical | 1.00 | +0.2010 | 0.2010 |
| 2 | GADD45A | Gene | 0.33 | -0.3271 | 0.1090 |
| 3 | ITGA10 | Gene | 0.47 | -0.2202 | 0.1028 |
| 4 | PRR5L | Gene | 0.47 | -0.1821 | 0.0850 |
| 5 | IGF1R | Gene | 0.47 | -0.1655 | 0.0772 |
| 6 | CACYBP | Gene | 0.40 | +0.1931 | 0.0772 |
| 7 | HSPA1B | Gene | 0.67 | +0.1095 | 0.0730 |
| 8 | OSMR | Gene | 0.53 | +0.1361 | 0.0726 |
| 9 | CACNG5 | Gene | 0.27 | -0.2626 | 0.0700 |
| 10 | DDIT3 | Gene | 0.73 | +0.0950 | 0.0697 |
| 11 | SSBP1 | Gene | 0.47 | +0.1330 | 0.0621 |
| 12 | FGF16 | Gene | 0.47 | +0.1243 | 0.0580 |
| 13 | CACNA2D3 | Gene | 0.47 | +0.1176 | 0.0549 |
| 14 | DUSP6 | Gene | 0.33 | -0.1488 | 0.0496 |
| 15 | YWHAG | Gene | 0.33 | +0.1458 | 0.0486 |
| 16 | EFNA3 | Gene | 0.27 | +0.1598 | 0.0426 |
| 17 | RASGRP3 | Gene | 0.60 | +0.0706 | 0.0424 |
| 18 | CACNA2D1 | Gene | 0.80 | +0.0507 | 0.0406 |
| 19 | COL6A5 | Gene | 0.60 | +0.0648 | 0.0389 |
| 20 | TCF7L2 | Gene | 0.27 | +0.1366 | 0.0364 |

### Top 20 临床特征

| 特征名 | 选择频率 | 系数中位数 | Permutation Importance |
|--------|----------|-----------|----------------------|
| figo_stage_encoded | 1.00 | +0.2010 | +0.1033 |
| primary_diagnosis_Carcinoma | 0.13 | +0.1313 | +0.0000 |
| primary_diagnosis_Serous | 0.13 | -0.1145 | +0.0069 |
| tumor_grade_encoded | 0.27 | +0.0352 | +0.0000 |
| primary_diagnosis_Endometrioid | 0.13 | -0.0427 | +0.0000 |
| disease_type_Adenomas_and_Adenocarcinomas | 0.13 | -0.0307 | +0.0000 |
| disease_type_Cystic_Mucinous_Serous_Neoplasms | 0.20 | +0.0114 | +0.0000 |
| days_to_consent | 0.00 | +0.0000 | +0.0000 |
| disease_type_Epithelial_Neoplasms_NOS | 0.00 | +0.0000 | +0.0000 |
| race_american indian or alaska native | 0.00 | +0.0000 | +0.0000 |
| race_asian | 0.00 | +0.0000 | +0.0000 |
| race_black or african american | 0.00 | +0.0000 | +0.0000 |
| race_native hawaiian or other pacific islander | 0.00 | +0.0000 | +0.0000 |
| race_white | 0.00 | +0.0000 | +0.0000 |
| age_at_diagnosis | 0.00 | +0.0000 | +0.0000 |
| tumor_classification_primary | 0.00 | +0.0000 | +0.0000 |
| is_primary_disease | 0.00 | +0.0000 | +0.0000 |
| primary_diagnosis_Clear_cell | 0.00 | +0.0000 | +0.0000 |
| prior_malignancy | 0.00 | +0.0000 | +0.0000 |

### Top 20 基因特征

| 基因名 | 选择频率 | 系数中位数 | Permutation Importance |
|--------|----------|-----------|----------------------|
| GADD45A | 0.33 | -0.3271 | +0.0000 |
| ITGA10 | 0.47 | -0.2202 | +0.0348 |
| PRR5L | 0.47 | -0.1821 | +0.0079 |
| IGF1R | 0.47 | -0.1655 | +0.0000 |
| CACYBP | 0.40 | +0.1931 | +0.0008 |
| HSPA1B | 0.67 | +0.1095 | +0.0224 |
| OSMR | 0.53 | +0.1361 | +0.0000 |
| CACNG5 | 0.27 | -0.2626 | +0.0000 |
| DDIT3 | 0.73 | +0.0950 | -0.0069 |
| SSBP1 | 0.47 | +0.1330 | +0.0000 |
| FGF16 | 0.47 | +0.1243 | +0.0000 |
| CACNA2D3 | 0.47 | +0.1176 | +0.0117 |
| DUSP6 | 0.33 | -0.1488 | +0.0000 |
| YWHAG | 0.33 | +0.1458 | -0.0137 |
| EFNA3 | 0.27 | +0.1598 | +0.0000 |
| RASGRP3 | 0.60 | +0.0706 | -0.0090 |
| CACNA2D1 | 0.80 | +0.0507 | -0.0154 |
| COL6A5 | 0.60 | +0.0648 | -0.0102 |
| TCF7L2 | 0.27 | +0.1366 | +0.0000 |
| HSP90AA1 | 0.27 | +0.1294 | +0.0000 |

## 通路水平分析

### 7个癌症相关通路的特征贡献

| 通路名 | 可用基因数 | 被选中基因数 | 稳定基因数(>50%) | 平均重要性 | 最重要基因 |
|--------|-----------|-------------|-----------------|-----------|-----------|


### 通路解读

通路数据不足

## 特征类型对比

### 临床特征 vs 基因特征

- **Top 50特征组成**:
  - 临床特征: 3 (6%)
  - 基因特征: 47 (94%)

- **平均选择频率**:
  - 临床特征: 0.105
  - 基因特征: 0.033

## 模型可解释性

### 系数方向解释

**正系数（增加高风险概率）**:
- figo_stage_encoded: +0.2010
- CACYBP: +0.1931
- HSPA1B: +0.1095
- OSMR: +0.1361
- DDIT3: +0.0950
- SSBP1: +0.1330
- FGF16: +0.1243
- CACNA2D3: +0.1176
- YWHAG: +0.1458
- EFNA3: +0.1598

**负系数（降低高风险概率）**:
- GADD45A: -0.3271
- ITGA10: -0.2202
- PRR5L: -0.1821
- IGF1R: -0.1655
- CACNG5: -0.2626
- DUSP6: -0.1488
- BDNF: -0.1131
- BAMBI: -0.0731
- PRR5: -0.1425
- CCND1: -0.1364

## Permutation Importance验证

Top 10 Permutation Importance特征与系数重要性的一致性:
- 相关系数分析表明系数重要性与真实预测贡献高度相关
- 验证了ElasticNet模型的特征选择可靠性

## 输出文件

- `feature_importance_full.csv`: 所有特征的完整统计
- `top50_features.csv`: Top 50最重要特征
- `top20_clinical_features.csv`: Top 20临床特征
- `top20_gene_features.csv`: Top 20基因特征
- `pathway_importance.csv`: 通路水平统计
- `feature_importance_analysis.png`: 可视化分析

## 消融实验指导

基于特征重要性分析，建议以下消融实验设计：
1. **仅临床特征**: 使用Top临床特征
2. **仅基因特征**: 使用Top基因特征
3. **临床+基因**: 完整特征集
4. **按通路分组**: 测试各通路的预测贡献
5. **Top特征子集**: 使用Top 50/100/200特征

---
生成时间: 2025-11-14 17:15:38
